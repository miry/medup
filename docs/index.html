<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.33.0">

<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>

  <meta id="repository-name" content="github.com/miry/medup">
  <title>README - github.com/miry/medup</title>
  <script type="text/javascript">
  CrystalDoc.base_path = "";
  </script>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="github.com/miry/medup/Medium" data-name="medium">
      <a href="Medium.html">Medium</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/miry/medup/Medium/Client" data-name="medium::client">
      <a href="Medium/Client.html">Client</a>
      
        <ul>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Client/Collections" data-name="medium::client::collections">
      <a href="Medium/Client/Collections.html">Collections</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Client/Media" data-name="medium::client::media">
      <a href="Medium/Client/Media.html">Media</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Client/Posts" data-name="medium::client::posts">
      <a href="Medium/Client/Posts.html">Posts</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Client/Users" data-name="medium::client::users">
      <a href="Medium/Client/Users.html">Users</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/ClientError" data-name="medium::clienterror">
      <a href="Medium/ClientError.html">ClientError</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Connection" data-name="medium::connection">
      <a href="Medium/Connection.html">Connection</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/ConnectionAPI" data-name="medium::connectionapi">
      <a href="Medium/ConnectionAPI.html">ConnectionAPI</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Error" data-name="medium::error">
      <a href="Medium/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/ParagraphMetadata" data-name="medium::paragraphmetadata">
      <a href="Medium/ParagraphMetadata.html">ParagraphMetadata</a>
      
    </li>
  
  <li class="parent " data-id="github.com/miry/medup/Medium/Post" data-name="medium::post">
      <a href="Medium/Post.html">Post</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/miry/medup/Medium/Post/Paragraph" data-name="medium::post::paragraph">
      <a href="Medium/Post/Paragraph.html">Paragraph</a>
      
        <ul>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Post/Paragraph/DropCapImage" data-name="medium::post::paragraph::dropcapimage">
      <a href="Medium/Post/Paragraph/DropCapImage.html">DropCapImage</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Post/Paragraph/Iframe" data-name="medium::post::paragraph::iframe">
      <a href="Medium/Post/Paragraph/Iframe.html">Iframe</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Post/Paragraph/MixtapeMetadata" data-name="medium::post::paragraph::mixtapemetadata">
      <a href="Medium/Post/Paragraph/MixtapeMetadata.html">MixtapeMetadata</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Post/Paragraph/ParagraphMarkup" data-name="medium::post::paragraph::paragraphmarkup">
      <a href="Medium/Post/Paragraph/ParagraphMarkup.html">ParagraphMarkup</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/Post/Tag" data-name="medium::post::tag">
      <a href="Medium/Post/Tag.html">Tag</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/PostBodyModel" data-name="medium::postbodymodel">
      <a href="Medium/PostBodyModel.html">PostBodyModel</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/PostContent" data-name="medium::postcontent">
      <a href="Medium/PostContent.html">PostContent</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/PostVirtuals" data-name="medium::postvirtuals">
      <a href="Medium/PostVirtuals.html">PostVirtuals</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/ServerError" data-name="medium::servererror">
      <a href="Medium/ServerError.html">ServerError</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medium/User" data-name="medium::user">
      <a href="Medium/User.html">User</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/miry/medup/Medup" data-name="medup">
      <a href="Medup.html">Medup</a>
      
        <ul>
  
  <li class=" " data-id="github.com/miry/medup/Medup/Command" data-name="medup::command">
      <a href="Medup/Command.html">Command</a>
      
    </li>
  
  <li class=" " data-id="github.com/miry/medup/Medup/Tool" data-name="medup::tool">
      <a href="Medup/Tool.html">Tool</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<p><img src="./img/logo.svg" alt="Logo"/></p>

<h1><a id="medup" class="anchor" href="#medup">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Medup</h1>

<p><a href="https://github.com/miry/medup/releases" target="_blank"><img src="https://img.shields.io/github/release/miry/medup.svg?style=flat" alt=""/></a>
<a href="https://raw.githubusercontent.com/miry/medup/master/LICENSE" target="_blank"><img src="https://img.shields.io/github/license/miry/medup" alt=""/></a></p>

<blockquote>Sync all content from Medium with local folder via API</blockquote>

<h1><a id="table-of-contents" class="anchor" href="#table-of-contents">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Table of Contents</h1>

<ul><li><a href="#features" target="_blank">Features</a></li><li><a href="#getting-started" target="_blank">Getting Started</a></li><li><a href="#contributing" target="_blank">Contributing</a></li><li><a href="#contributors" target="_blank">Contributors</a></li><li><a href="#license" target="_blank">License</a></li></ul>

<h1><a id="features" class="anchor" href="#features">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Features</h1>

<ul><li>Discover all articles from user account available in public</li><li>Allow to download all recommended articles by user</li><li>Download images used inside article</li><li>Save posts in markdown format</li><li>Convert a single article in markdown format</li></ul>

<h1><a id="getting-started" class="anchor" href="#getting-started">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Getting Started</h1>

<h2><a id="homebrew" class="anchor" href="#homebrew">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Homebrew</h2>

<p>Install <code>medup</code> tool to the MacOS or Linux via Hombrew:</p>

<pre><code class="language-shell">$ brew tap miry/medup
$ brew install medup</code></pre>

<p>Run export command for <strong>Medium</strong> author <em>miry</em> and save articles to local folder:</p>

<pre><code class="language-shell">$ medup -u miry -d .</code></pre>

<h2><a id="docker" class="anchor" href="#docker">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Docker</h2>

<p>Docker way to make same job:</p>

<pre><code class="language-shell">$ docker run -v &lt;path to local articles folder>:/posts -it miry/medup -u &lt;user></code></pre>

<p>Download all articles that user has recommended:</p>

<pre><code class="language-shell">$ docker run -v &lt;path to local articles folder>:/posts -it miry/medup -u &lt;user> --recommended -d posts/recommended</code></pre>

<h2><a id="crystal" class="anchor" href="#crystal">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Crystal</h2>

<p>Run dumping with source code</p>

<pre><code class="language-shell">$ shards install
$ crystal run src/cli.cr -- -u &lt;medium user> -d &lt;destination folder></code></pre>

<p>Example download all posts from author https://medium.com/@miry to local folder <code>posts/miry</code></p>

<pre><code class="language-shell">$ crystal run src/cli.cr -- -u miry -d posts/miry</code></pre>

<h2><a id="build" class="anchor" href="#build">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Build</h2>

<p>Build a application binary and execute:</p>

<pre><code class="language-shell">$ shards install
$ rake build
$ _output/medup -u &lt;medium user> -d &lt;destination folder></code></pre>

<h1><a id="result" class="anchor" href="#result">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Result</h1>

<p>By default all articles destination folder is <code>posts</code>.</p>

<p>In the directory, you can find 2 format of files: <code>.json</code> and <code>.md</code>.</p>

<ul><li><em>JSON</em> format is the raw, what <em>Medium</em> returns.</li><li><em>Markdown</em> format is simple implementation of block formated text.</li></ul>

<p>Images and <code>IFRAME</code> content are located in <code>posts/assets</code>.</p>

<h2><a id="markdown" class="anchor" href="#markdown">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Markdown</h2>

<p>Example of exported document (Original Medium post vs Exported Markdown):</p>

<p><img src="./img/compare.png" alt=""/></p>

<h1><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h1>

<ol><li>Fork it ( https://github.com/miry/medup/fork )</li><li>Create your feature branch (git checkout -b my-new-feature)</li><li>Commit your changes (git commit -am 'Add some feature')</li><li>Push to the branch (git push origin my-new-feature)</li><li>Create a new Pull Request</li></ol>

<h1><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h1>

<ul><li><a href="https://github.com/miry" target="_blank">@miry</a> Michael Nikitochkin - creator, maintainer</li><li><a href="https://github.com/alexanderadam" target="_blank">@alexanderadam</a> Alexander - supporter</li></ul>

<h1><a id="license" class="anchor" href="#license">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>License</h1>

<p>This project is under the LGPL-3.0 license.</p>

<h1><a id="play-ownself" class="anchor" href="#play-ownself">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Play ownself</h1>

<h3><a id="medium-api" class="anchor" href="#medium-api">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Medium API</h3>

<ol><li><a href="https://github.com/Medium/medium-api-docs" target="_blank">Medium API documentation</a></li><li>Generate token on the page https://medium.com/me/settings</li><li>Create environment variable <code>MEDIUM_TOKEN=<token></code></li></ol>

<ol><li>Verify token with sample query:</li></ol>

<pre><code class="language-shell">$ curl -H "Authorization: Bearer &lt;token>" https://api.medium.com/v1/me
{"data":{"id":"number","username":"miry","name":"Michael Nikitochkin","url":"https://medium.com/@miry","imageUrl":"https://cdn-images-1.medium.com/fit/c/400/400/0*KgbjgGnH-csHuB8j."}}</code></pre>

<h3><a id="crawler" class="anchor" href="#crawler">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Crawler</h3>

<ol><li>Check public information not covered by API</li></ol>

<pre><code class="language-shell">$ curl "https://medium.com/@miry?format=json" | cut -c17- && : Remove in the front from response some strange JS code.</code></pre>

<ol><li>Pagination</li></ol>

<pre><code class="language-shell">$ curl "https://medium.com/@miry/latest?format=json&limit=100" | cut -c17- && : Remove in the front from response some strange JS code.</code></pre>

<ol><li>Post info</li></ol>

<pre><code class="language-shell">curl -s -H "Content-Type: application/json" https://medium.com/@miry/c35b40c499e\?format\=json\&limit\=100</code></pre>

<ol><li>Stream</li></ol>

<pre><code class="language-shell">$ curl -s -H "Content-Type: application/json" "https://medium.com/_/api/users/fdf238948af6/profile/stream?source=overview" | cut -c17-
$ curl -s -H "Content-Type: application/json" "https://medium.com/_/api/users/fdf238948af6/profile/stream?limit=100&page=3" | cut -c17- > stream.json
$ cat stream.json| jq ".payload.references.Post[].title"
$ cat stream.json| jq ".payload.paging.next"</code></pre>

<ol><li>Recommendations</li></ol>

<pre><code class="language-shell">$ curl -s -H "Content-Type: application/json" https://medium.com/@miry/has-recommended | cut -c17-
$ curl -s -H "Content-Type: application/json" "https://medium.com/_/api/users/fdf238948af6/profile/stream?source=has-recommended" | cut -c17-</code></pre>
</div>
</body>
</html>
